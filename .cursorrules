# Jay Framework Project Rules

## Design Log Methodology

The project follows a rigorous design log methodology for all significant features and architectural changes.

### Before Making Changes
1. **Check design logs** in `./design-log/` for existing designs and implementation notes
2. **For new features**: Create design log first, get approval, then implement
3. **Read related design logs** to understand context and constraints

### When Creating Design Logs
1. **Structure**: Background → Problem → Solution → Implementation Plan → Examples → Trade-offs → Migration → Success Criteria
2. **Be specific**: Include file paths, type signatures, validation rules
3. **Show examples**: Use ✅/❌ for good/bad patterns, include realistic code
4. **Explain why**: Don't just describe what, explain rationale and trade-offs
5. **Ask Questions (in the file)**: For anything that is not clear, or missing information

### When Implementing
1. **Follow the implementation plan** phases from the design log
3. **Update design log** with "Implementation Results" section as you go
4. **Document deviations**: Explain why implementation differs from design
5. **Run tests**: Include test results (X/Y passing) in implementation notes

### When Answering Questions
1. **Reference design logs** by number when relevant (e.g., "See Design Log #50")
2. **Use codebase terminology**: ViewState, Contract, JayContract, phase annotations
3. **Show type signatures**: This is a TypeScript project with heavy type usage
4. **Consider backward compatibility**: Default to non-breaking changes

### Code Style
- Use existing patterns (e.g., `Pick<>` for phase-specific types)
- Prefer compile-time validation over runtime checks
- Generate types from contracts when possible
- Include JSDoc comments for complex types
- Use factory functions for better DX (e.g., `slow()`, `fast()`, `interactive()`)

## Key Codebase Concepts

Jay is a new full stack web framework. 

Key Concepts are documented in ./docs

- **Contract files** (`.jay-contract`): Define data structure with phase annotations
- **Jay HTML** (`.jay-html`): Templates that can reference contracts
- **Jay Runtime** (`/packages/runtime`): Runtime code that runs in the browser
- **Jay Compiler** (`/packages/compiler`): Compiler transforms jay-html files to code and 
  composes applications using the jay framework
- **Jay Runtime** (`/packages/jay-stack`): The full stack application runtime
- **ViewState**: Data properties, **NOT** interactive elements (those go in Refs)
- **Not React**: Jay is not react and does not use JSX