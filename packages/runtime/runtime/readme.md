# Jay Runtime

The Jay Runtime library is an efficient dom manipulation library, built to be the output of code generation (`jay-compiler`).
See the `jay-compiler` docs for the format of the `jay-html` file that compiles to `jay-runtime` types.

The runtime basic building block is the `JayElement<ViewState, Refs>` which is an instance returned from the `element` and
`dynamicElement` functions, as well as what is returned from the `render()` function generated by the `jay-compiler`.

## JayElement

The `JayElement<ViewState, Refs>` instance manages the dom structure, including initial dom creation, updates to the dom and
event handling. `BaseJayElement<ViewState>` is the internal working data structure, while `JayElement<ViewState, Refs>`
is the public element type.

The `JayElement<ViewState, refs>` is defined as

```typescript
interface BaseJayElement<ViewState> {
  dom: HTMLElement;
  update: updateFunc<ViewState>;
  mount: mountFunc;
  unmount: mountFunc;
}

interface JayElement<ViewState, Refs> extends BaseJayElement<ViewState> {
  refs: Refs;
}
```

### Properties:

- `dom`: An HTMLElement instance representing the DOM element associated with this JayElement.
  This is the element that will be rendered to the page.
- `update`: A function of type `type updateFunc<ViewState> = (newData: ViewState) => void`.
  This function is responsible for updating the internal state (ViewState) of the JayElement and re-rendering its
  DOM representation if necessary. The ViewState is considered an **immutable** object by the internals of the `update` function.
- `mount`: A function of type `type mountFunc = () => void`. This function is used to mount a previously unmounted `JayElement`.
  `JayElement`s are created in mount state.
- `unmount`: A function of type `type mountFunc = () => void`. This function is designed to be called when the JayElement is removed from the DOM.
- `refs`: This property holds references by `ref` to DOM elements or other components within the JayElement.
  These references can be used to set event listeners, interact with child elements or component APIs.

## implementation details

* See the [Runtime Implementation](./runtime.md) for the details of the compilation target.
* See the [Context Implementation](./context.md) for the details of the context API internals (not the public API).
* See the [Kindergarten](kindergarten.md) for the class responsible to manage the children of a DOM element.